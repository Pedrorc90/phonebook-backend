(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(2),u=t.n(c),r=t(16),a=t.n(r),o=(t(21),t(4)),i=t(3),s=t.n(i),l="/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},j=function(e){return s.a.post(l,e).then((function(e){return e.data}))},b=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},h=function(e){return s.a.get("".concat(l),{params:{name:e}}).then((function(e){return e.data}))},m=t(0),O=function(e){var n=e.inputValue,t=e.onChangeHandler;return Object(m.jsxs)("div",{children:["Search: ",Object(m.jsx)("input",{value:n,onChange:t})]})},v=function(e){var n=e.nameInputValue,t=e.nameOnChangeHandler,c=e.numberInputValue,u=e.numberOnChangeHandler;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:t})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:c,onChange:u})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.list;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Numbers"}),n]})},g=function(e){var n=e.message;return null===n?null:Object(m.jsx)("div",{className:"error",children:n})},x=function(e){var n=e.message;return null===n?null:Object(m.jsx)("div",{className:"success",children:n})},C=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],r=Object(c.useState)(""),a=Object(o.a)(r,2),i=a[0],s=a[1],l=Object(c.useState)(""),C=Object(o.a)(l,2),w=C[0],S=C[1],k=Object(c.useState)(""),I=Object(o.a)(k,2),T=I[0],y=I[1],H=Object(c.useState)(null),V=Object(o.a)(H,2),D=V[0],F=V[1],L=Object(c.useState)(null),N=Object(o.a)(L,2),P=N[0],B=N[1];Object(c.useEffect)((function(){return d().then((function(e){return u(e)}))}),[]);var E;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(x,{message:P}),Object(m.jsx)(g,{message:D}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:i,number:w};h(i).then((function(e){var c=e.filter((function(e){return e.name===i}));0!==c.length?window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))&&b(c[0].id,n).then((function(e){u(t.map((function(n){return n.id!==e.id?n:e}))),B("User ".concat(e.name," updated successfully")),setTimeout((function(){return B(null)}),5e3)})).catch((function(e){F("content missing"),setTimeout((function(){return F(null)}),5e3)})):j(n).then((function(e){u(t.concat(e)),B("User ".concat(e.name," created successfully")),setTimeout((function(){return B(null)}),5e3)})).catch((function(e){F(e.response.data.error),setTimeout((function(){return F(null)}),5e3)}))}))},children:[Object(m.jsx)(O,{inputValue:T,onChangeHandler:function(e){return y(e.target.value)}}),Object(m.jsx)("h2",{children:"Add a new"}),Object(m.jsx)(v,{nameInputValue:i,nameOnChangeHandler:function(e){return s(e.target.value)},numberInputValue:w,numberOnChangeHandler:function(e){return S(e.target.value)}})]}),Object(m.jsx)(p,{list:(E=T,t.map((function(e){if(e.name.toLowerCase().includes(E.toLowerCase()))return Object(m.jsxs)("li",{children:[e.name," - ",e.number," ",Object(m.jsx)("button",{onClick:function(){var n,t;n=e.id,t=e.name,window.confirm("Delete ".concat(n))&&f(n).then((function(e){return d().then((function(e){return u(e)}))})).catch((function(e){console.log(e),F("Information of ".concat(t," has already been removed from server")),setTimeout((function(){F(null)}),5e3)}))},children:"Delete"})]},e.id)})))})]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,c=n.getFID,u=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),u(e),r(e),a(e)}))};a.a.render(Object(m.jsx)(u.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root")),w()}},[[41,1,2]]]);
//# sourceMappingURL=main.864aab5b.chunk.js.map